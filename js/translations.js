const translations = {
  ru: {
    // Основные элементы
    siteName: "Лавка цветов Нячанг",
    tagline: "Свежие цветы с доставкой по Нячангу",
    orderButton: "Заказать в Telegram",
    orderViaTelegram: "Заказать через Telegram",
    
    // Навигация
    home: "Главная",
    about: "О нас",
    gallery: "Галерея",
    contacts: "Контакты",
    catalog: "Каталог",
    
    // Главная страница
    welcome: "Добро пожаловать",
    flowersShop: "Лавка цветов",
    welcomeText: "Мы предлагаем свежие цветы с доставкой по всему Нячангу. Красивые букеты и композиции для любого случая.",
    buyNow: "Заказать сейчас",
    
    // О нас
    aboutFlowers: "О наших цветах",
    aboutText: "Наша лавка цветов в Нячанге специализируется на свежих цветах и красивых композициях. Мы доставляем цветы по всему городу и создаем уникальные букеты для особых моментов.",
    
    // Почему мы
    whyChooseUs: "Почему выбирают нас",
    whyText: "Мы работаем с лучшими поставщиками цветов во Вьетнаме, обеспечивая свежесть и качество наших букетов. Быстрая доставка по Нячангу и индивидуальный подход к каждому заказу.",
    readMore: "Читать далее",
    
    // Галерея
    ourGallery: "Наша галерея",
    
    // Отзывы
    customerReviews: "Отзывы наших клиентов",
    
    // Контакты
    contactUs: "Связаться с нами",
    name: "Имя",
    email: "Email",
    phone: "Телефон",
    message: "Сообщение",
    send: "Отправить",
    
    // Информация
    usefulLinks: "Полезные ссылки",
    instagram: "Instagram",
    contact: "Контакты",
    address: "Нячанг, Вьетнам",
    phoneNumber: "+84 XXX XXX XXX",
    emailAddress: "support@flowers-nhatrang.com",
    workHours: "Пн-Вс: 9:00 - 21:00 (UTC+7)",
    delivery: "Доставка по Нячангу",
    
    // Цены и заказ
    price: "Цена",
    order: "Заказать",
    addToCart: "В корзину",
    checkout: "Оформить заказ",
    orderRedirect: "Оформление заказа",
    orderRedirectText: "Для оформления заказа перейдите в наш Telegram бот",
    openTelegramBot: "Открыть Telegram бот",
    
    // Футер
    allRightsReserved: "Все права защищены",
    poweredBy: "Создано с помощью",
    
    // Валюты
    currency: "VND",
    priceFormat: "750,000 VND"
  },
  
  en: {
    // Основные элементы
    siteName: "Nha Trang Flower Shop",
    tagline: "Fresh flowers with delivery in Nha Trang",
    orderButton: "Order via Telegram",
    orderViaTelegram: "Order via Telegram",
    
    // Навигация
    home: "Home",
    about: "About",
    gallery: "Gallery",
    contacts: "Contacts",
    catalog: "Catalog",
    
    // Главная страница
    welcome: "Welcome",
    flowersShop: "Flower Shop",
    welcomeText: "We offer fresh flowers with delivery throughout Nha Trang. Beautiful bouquets and compositions for any occasion.",
    buyNow: "Order Now",
    
    // О нас
    aboutFlowers: "About Our Flowers",
    aboutText: "Our flower shop in Nha Trang specializes in fresh flowers and beautiful compositions. We deliver flowers throughout the city and create unique bouquets for special moments.",
    
    // Почему мы
    whyChooseUs: "Why Choose Us",
    whyText: "We work with the best flower suppliers in Vietnam, ensuring freshness and quality of our bouquets. Fast delivery in Nha Trang and individual approach to each order.",
    readMore: "Read More",
    
    // Галерея
    ourGallery: "Our Gallery",
    
    // Отзывы
    customerReviews: "What Our Customers Say",
    
    // Контакты
    contactUs: "Contact Us",
    name: "Name",
    email: "Email",
    phone: "Phone",
    message: "Message",
    send: "Send",
    
    // Информация
    usefulLinks: "Useful Links",
    instagram: "Instagram",
    contact: "Contact",
    address: "Nha Trang, Vietnam",
    phoneNumber: "+84 XXX XXX XXX",
    emailAddress: "support@flowers-nhatrang.com",
    workHours: "Mon-Sun: 9:00 - 21:00 (UTC+7)",
    delivery: "Delivery in Nha Trang",
    
    // Цены и заказ
    price: "Price",
    order: "Order",
    addToCart: "Add to Cart",
    checkout: "Checkout",
    orderRedirect: "Order Processing",
    orderRedirectText: "To place an order, go to our Telegram bot",
    openTelegramBot: "Open Telegram Bot",
    
    // Футер
    allRightsReserved: "All Rights Reserved",
    poweredBy: "Powered by",
    
    // Валюты
    currency: "VND",
    priceFormat: "750,000 VND"
  },
  
  vi: {
    // Основные элементы
    siteName: "Cửa Hàng Hoa Nha Trang",
    tagline: "Hoa tươi giao hàng tại Nha Trang",
    orderButton: "Đặt hàng qua Telegram",
    orderViaTelegram: "Đặt hàng qua Telegram",
    
    // Навигация
    home: "Trang chủ",
    about: "Giới thiệu",
    gallery: "Thư viện ảnh",
    contacts: "Liên hệ",
    catalog: "Danh mục",
    
    // Главная страница
    welcome: "Chào mừng",
    flowersShop: "Cửa hàng hoa",
    welcomeText: "Chúng tôi cung cấp hoa tươi với dịch vụ giao hàng khắp Nha Trang. Những bó hoa và tác phẩm nghệ thuật đẹp cho mọi dịp.",
    buyNow: "Đặt hàng ngay",
    
    // О нас
    aboutFlowers: "Về hoa của chúng tôi",
    aboutText: "Cửa hàng hoa của chúng tôi tại Nha Trang chuyên về hoa tươi và những tác phẩm nghệ thuật đẹp. Chúng tôi giao hoa khắp thành phố và tạo ra những bó hoa độc đáo cho những khoảnh khắc đặc biệt.",
    
    // Почему мы
    whyChooseUs: "Tại sao chọn chúng tôi",
    whyText: "Chúng tôi làm việc với những nhà cung cấp hoa tốt nhất tại Việt Nam, đảm bảo độ tươi và chất lượng của những bó hoa. Giao hàng nhanh tại Nha Trang và cách tiếp cận cá nhân cho từng đơn hàng.",
    readMore: "Đọc thêm",
    
    // Галерея
    ourGallery: "Thư viện ảnh của chúng tôi",
    
    // Отзывы
    customerReviews: "Khách hàng nói gì về chúng tôi",
    
    // Контакты
    contactUs: "Liên hệ với chúng tôi",
    name: "Tên",
    email: "Email",
    phone: "Điện thoại",
    message: "Tin nhắn",
    send: "Gửi",
    
    // Информация
    usefulLinks: "Liên kết hữu ích",
    instagram: "Instagram",
    contact: "Liên hệ",
    address: "Nha Trang, Việt Nam",
    phoneNumber: "+84 XXX XXX XXX",
    emailAddress: "support@flowers-nhatrang.com",
    workHours: "Thứ 2-CN: 9:00 - 21:00 (UTC+7)",
    delivery: "Giao hàng tại Nha Trang",
    
    // Цены и заказ
    price: "Giá",
    order: "Đặt hàng",
    addToCart: "Thêm vào giỏ",
    checkout: "Thanh toán",
    orderRedirect: "Xử lý đơn hàng",
    orderRedirectText: "Để đặt hàng, hãy vào bot Telegram của chúng tôi",
    openTelegramBot: "Mở bot Telegram",
    
    // Футер
    allRightsReserved: "Tất cả quyền được bảo lưu",
    poweredBy: "Được tạo bởi",
    
    // Валюты
    currency: "VND",
    priceFormat: "750,000 VND"
  }
};

// Функция изменения языка
function changeLanguage(lang) {
  // Сохраняем выбранный язык
  localStorage.setItem('language', lang);
  
  // Переводим все элементы с data-translate
  document.querySelectorAll('[data-translate]').forEach(el => {
    const key = el.getAttribute('data-translate');
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
  
  // Обновляем активную кнопку языка
  document.querySelectorAll('.language-switcher button').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
  
  // Обновляем атрибут lang у html элемента
  document.documentElement.lang = lang;
}

// Определить язык браузера при первом посещении
function detectBrowserLanguage() {
  const browserLang = navigator.language.slice(0, 2).toLowerCase(); // 'ru', 'en', 'vi', etc
  const supportedLangs = ['ru', 'en', 'vi'];
  
  // Проверяем, поддерживается ли язык браузера
  if (supportedLangs.includes(browserLang)) {
    return browserLang;
  }
  
  // Проверяем полный код языка (например, 'en-US' -> 'en')
  const fullLang = navigator.language.toLowerCase();
  for (let lang of supportedLangs) {
    if (fullLang.startsWith(lang)) {
      return lang;
    }
  }
  
  // По умолчанию русский
  return 'ru';
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', () => {
  // Получаем сохраненный язык или определяем по браузеру
  let savedLang = localStorage.getItem('language');
  
  // Если язык не сохранен - определяем по браузеру
  if (!savedLang) {
    savedLang = detectBrowserLanguage();
    localStorage.setItem('language', savedLang);
  }
  
  changeLanguage(savedLang);
  
  // Добавляем обработчики для кнопок переключения языка
  document.querySelectorAll('.language-switcher button').forEach(btn => {
    btn.addEventListener('click', () => {
      const lang = btn.getAttribute('data-lang');
      changeLanguage(lang);
    });
  });
});
